(this.webpackJsonpproject1=this.webpackJsonpproject1||[]).push([[0],{164:function(e,t,n){},288:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(11),i=n.n(r),o=n(26),s=n(7),l=(n(164),n(60)),u=n(143),d="REGISTER_REQUEST",j="REGISTER_SUCCESS",b="REGISTER_FAIL",p="LOGIN_REQUEST",m="LOGIN_SUCESS",g="LOGIN_FAIL",O="LOGOUT",h="FETCH_CONTACT_REQUEST",f="FETCH_CONTACT_SUCESS",x="FETCH_CONTACT_FAILURE",v={loading:!1,user:{}},S=function(){var e=localStorage.getItem("auth_token");try{var t=JSON.parse(e).user;if(t)return Object(s.a)(Object(s.a)({},v),{},{user:t})}catch(n){return v}}(),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case j:return Object(s.a)(Object(s.a)({},e),{},{loading:!1,user:t.payload});case b:return Object(s.a)(Object(s.a)({},e),{},{loading:!1});case p:return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case m:return Object(s.a)(Object(s.a)({},e),{},{loading:!1,user:t.payload});case g:return Object(s.a)(Object(s.a)({},e),{},{loading:!1});case O:return Object(s.a)(Object(s.a)({},e),{},{user:{}});default:return e}},I={loading:!1,user:[],error:""},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case f:return Object(s.a)(Object(s.a)({},e),{},{loading:!1,user:t.payload,error:""});case x:return Object(s.a)(Object(s.a)({},e),{},{loading:!1,user:[],error:t.payload});default:return e}},N=Object(l.b)({authState:y,contacts:w}),k=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,C=Object(l.d)(N,k(Object(l.a)(u.a))),E=n(154),_=Object(E.a)({palette:{primary:{main:"#22982f"},secondary:{main:"#755600"}},typography:{h1:{fontSize:"4rem",fontWeight:500},h2:{fontSize:"3rem",fontWeight:500},h3:{fontSize:"2rem",fontWeight:500},h4:{fontSize:"1.5rem",fontWeight:500}},overrides:{textField:{padding:0}}}),B=n(326),T=n(328),R=n(33),A=n(2),L=Object(B.a)((function(e){return{welcomeWrap:{background:"#fcda3514",border:"1px solid #f1edde",minHeight:"100vh",justifyContent:"center",flexDirection:"column",alignItems:"center",fontSize:"1.2em",borderRadius:"25px"}}})),D=Object(R.b)((function(e){return{user:e.authState.user}}),null)((function(e){var t=e.user,n=L();return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(T.a,{container:!0,className:n.welcomeWrap,children:Object(A.jsx)(T.a,{item:12,children:Object(A.jsxs)("h1",{children:["Welcome",Object(A.jsx)("span",{style:{color:"#3baa49"},children:t.username?" ".concat(t.first_name,"  ").concat(t.last_name):"John Smith"})]})})})})})),F=function(){return Object(A.jsx)("div",{children:"Accounts"})},W=function(){return Object(A.jsx)("div",{children:"Transactions"})},U=function(){return Object(A.jsx)("div",{children:"Secure"})},q=function(){return Object(A.jsx)("div",{children:"Settings"})},G=n(21),z=n(333),P=n(86),H=n(334),J=n(331),Q=n(347),M=n(29),V=n(13),X=n(52),Y=n.n(X),Z=n(85),K=n(99),$=n.n(K),ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t="https://truly-contacts.herokuapp.com/api",n={};if(localStorage.auth_token){var a=JSON.parse(localStorage.auth_token),c=a.token;n.Authorization="".concat(c)}var r=$.a.create({baseURL:t,headers:n});return r.interceptors.response.use((function(e){return new Promise((function(t,n){t(e)}))}),(function(t){return t.response?404!==t.response.status?new Promise((function(e,n){n(t)})):(localStorage.removeItem("auth_token"),void(e?e.push("/login"):window.location="/login")):new Promise((function(e,n){n(t)}))})),r},te=function(e){return{type:j,payload:e}},ne=function(e){return{type:b,payload:e}},ae=function(e,t){[e].map((function(e){t(e)}))},ce=function(e){return{type:m,payload:e.user}},re=function(e){return{type:g,payload:e}},ie=n(36),oe=n(30),se=n(57),le=n(343),ue=["name"],de=Object(B.a)((function(e){return{input:{padding:e.spacing(2,2)}}})),je=function(e){var t=e.name,n=Object(se.a)(e,ue),a=de(),c=Object(ie.c)(t),r=Object(G.a)(c,2),i=r[0],o=r[1],l=Object(s.a)(Object(s.a)(Object(s.a)({},i),n),{},{fullWidth:!0,variant:"outlined"});return o&&o.touched&&o.error&&(l.error=!0,l.helperText=o.error),Object(A.jsx)(le.a,Object(s.a)({inputProps:{className:a.input}},l))},be=["children"],pe=function(e){var t=e.children,n=Object(se.a)(e,be),a=Object(ie.d)().submitForm,c=Object(s.a)(Object(s.a)({},n),{},{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){a()}});return Object(A.jsx)(J.a,Object(s.a)(Object(s.a)({},c),{},{children:t}))},me=n(345),ge=function(){return!!localStorage.auth_token},Oe=Object(B.a)((function(e){return{loginWrap:{minHeight:"calc(100vh - 100px)",background:"#efefef",display:"flex",justifyContent:"center",flexDirection:"column",padding:"50px 0"},loginBg:{background:"#fff",borderRadius:"20px",overflow:"hidden"},formInner:Object(o.a)({padding:e.spacing(7,12),textAlign:"center"},e.breakpoints.down("xs"),{padding:e.spacing(5)}),innerBg:Object(o.a)({background:"linear-gradient(to bottom, #37cf49, #2fba3f, #27a535, #1f902b, #177c22)",justifyContent:"center",color:"#fff",padding:e.spacing(7,6),textAlign:"center"},e.breakpoints.down("xs"),{padding:e.spacing(4,5)}),submitBtn:{borderRadius:e.spacing(8),color:"#fff",padding:e.spacing(1.5,7),width:"170px"},openBtn:{borderRadius:e.spacing(8),color:"#fff",padding:e.spacing(1.3,5),border:"2px solid #fff",marginTop:10},progressIcon:{color:"#fff"}}})),he={username:"",password:""},fe=oe.a().shape({username:oe.b().required("Required"),password:oe.b().required("No password provided.")}),xe=Object(R.b)((function(e){return{loading:e.authState.loading,username:e.authState.user.username}}),(function(e){return{login:function(t,n,a,c){console.log(t),e(function(e,t,n,a){return function(){var c=Object(Z.a)(Y.a.mark((function c(r){var i,o,s;return Y.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,r({type:p}),c.next=4,ee().post("/auth/login",e);case 4:i=c.sent,o=i.data,r(ce(o)),console.log(o),localStorage.setItem("auth_token",JSON.stringify(o)),t.push("/"),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(0),c.t0.response&&(s=c.t0.response.data,r(re(s)),console.log(n({message:s.detail})),a());case 15:case"end":return c.stop()}}),c,null,[[0,12]])})));return function(e){return c.apply(this,arguments)}}()}(t,n,a,c))}}}))((function(e){var t=e.login,n=e.loading,r=e.username,i=Object(a.useState)({message:""}),o=Object(G.a)(i,2),l=o[0],u=o[1];function d(e){return Object(A.jsx)(me.a,Object(s.a)({elevation:6,variant:"filled"},e))}var j=c.a.useState(!1),b=Object(G.a)(j,2),p=b[0],m=b[1],g=function(){m(!0)},O=function(e,t){"clickaway"!==t&&m(!1)},h=Oe(),f=Object(V.g)();ge()&&f.push("/");return Object(A.jsx)("section",{className:h.loginWrap,children:Object(A.jsxs)(z.a,{children:[Object(A.jsx)(T.a,{container:!0,justify:"center",children:Object(A.jsxs)(T.a,{container:!0,item:!0,sm:9,className:h.loginBg,children:[Object(A.jsxs)(T.a,{item:!0,sm:7,container:!0,justify:"center",className:h.formInner,children:[Object(A.jsxs)(P.a,{variant:"h3",color:"primary",style:{marginBottom:"20px"},children:["Sign in to ",r||"your account"]}),Object(A.jsx)(ie.b,{initialValues:Object(s.a)({},he),validationSchema:fe,onSubmit:function(e){console.log(e),t(e,f,u,g)},children:Object(A.jsx)(ie.a,{style:{width:"100%"},children:Object(A.jsxs)(T.a,{container:!0,spacing:2,children:[Object(A.jsx)(T.a,{item:!0,xs:12,children:Object(A.jsx)(je,{name:"username",label:"Username"})}),Object(A.jsx)(T.a,{item:!0,xs:12,children:Object(A.jsx)(je,{name:"password",label:"Password"})}),Object(A.jsx)(T.a,{item:!0,xs:12,children:Object(A.jsx)(pe,{className:h.submitBtn,children:n?Object(A.jsx)(H.a,{size:25,className:h.progressIcon}):"SIGN IN"})})]})})})]}),Object(A.jsxs)(T.a,{item:!0,sm:5,container:!0,direction:"column",alignItems:"center",className:(h.formInner,h.innerBg),children:[Object(A.jsx)(P.a,{variant:"h3",style:{marginBottom:"15px"},children:"Hello Friend"}),Object(A.jsx)(P.a,{variant:"subtitle1",children:"Enter Your personal details and start journey with us"}),Object(A.jsx)(J.a,{component:M.b,to:"/register",variant:"outlined",className:h.openBtn,children:"SIGN UP"})]})]})}),Object(A.jsx)(Q.a,{anchorOrigin:{vertical:"top",horizontal:"left"},open:p,autoHideDuration:6e3,onClose:O,children:Object(A.jsx)(d,{onClose:O,severity:"error",children:l.message})})]})})})),ve=Object(B.a)((function(e){return{loginWrap:{minHeight:"calc(100vh - 100px)",background:"#efefef",display:"flex",justifyContent:"center",flexDirection:"column",padding:"50px 0"},loginBg:{background:"#fff",borderRadius:"20px",overflow:"hidden"},formInner:Object(o.a)({padding:e.spacing(7,12),textAlign:"center"},e.breakpoints.down("xs"),{padding:e.spacing(5)}),innerBg:Object(o.a)({background:"linear-gradient(to bottom, #37cf49, #2fba3f, #27a535, #1f902b, #177c22)",justifyContent:"center",color:"#fff",padding:e.spacing(7,6),textAlign:"center"},e.breakpoints.down("xs"),{padding:e.spacing(4,5)}),submitBtn:{borderRadius:e.spacing(8),color:"#fff",padding:e.spacing(1.5,7),width:"170px"},openBtn:{borderRadius:e.spacing(8),color:"#fff",padding:e.spacing(1.3,5),border:"2px solid #fff",marginTop:10},progressIcon:{color:"#fff"}}})),Se={username:"",first_name:"",last_name:"",email:"",password:""},ye=oe.a().shape({username:oe.b().required("Required"),first_name:oe.b().required("Required"),last_name:oe.b().required("Required"),email:oe.b().email("Invalid email.").required("Required"),password:oe.b().required("No password provided.").min(8,"Password is too short - should be 8 chars minimum.").matches(/[a-zA-Z]/,"Password can only contain Latin letters.")}),Ie=[{path:"/login",component:xe},{path:"/register",component:Object(R.b)((function(e){return{loading:e.authState.loading}}),(function(e){return{register:function(t,n,a){var c=a.setErrors;console.log(t),e(function(e,t,n){var a=n.setErrors;return function(){var n=Object(Z.a)(Y.a.mark((function n(c){var r,i,o;return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:d}),n.next=4,ee().post("/auth/register",e);case 4:r=n.sent,i=r.data,c(te(i)),t.push("/login"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),n.t0.response&&400===n.t0.response.status&&(o=n.t0.response.data,c(ne(o)),ae(o,a));case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(t,n,{setErrors:c}))}}}))((function(e){var t=e.register,n=e.loading,a=ve(),c=Object(V.g)();ge()&&c.push("/");return Object(A.jsx)("section",{className:a.loginWrap,children:Object(A.jsx)(z.a,{children:Object(A.jsx)(T.a,{container:!0,justify:"center",children:Object(A.jsxs)(T.a,{container:!0,item:!0,sm:9,className:a.loginBg,children:[Object(A.jsxs)(T.a,{item:!0,sm:5,container:!0,direction:"column",alignItems:"center",className:(a.formInner,a.innerBg),children:[Object(A.jsx)(P.a,{variant:"h3",style:{marginBottom:"15px"},children:"Welcome Back !"}),Object(A.jsx)(P.a,{variant:"subtitle1",children:"To keep Connected With us please login with personal info"}),Object(A.jsx)(J.a,{component:M.b,to:"/login",variant:"outlined",className:a.openBtn,children:"SIGN IN"})]}),Object(A.jsxs)(T.a,{item:!0,sm:7,container:!0,justify:"center",className:a.formInner,children:[Object(A.jsx)(P.a,{variant:"h3",color:"primary",style:{marginBottom:"20px"},children:"Sign into your account"}),Object(A.jsx)(ie.b,{initialValues:Object(s.a)({},Se),validationSchema:ye,onSubmit:function(e,n){var a=n.setErrors;console.log(e),t(e,c,{setErrors:a})},children:Object(A.jsx)(ie.a,{style:{width:"100%"},children:Object(A.jsxs)(T.a,{container:!0,spacing:2,children:[Object(A.jsx)(T.a,{item:!0,xs:12,children:Object(A.jsx)(je,{name:"username",label:"Username"})}),Object(A.jsx)(T.a,{item:!0,xs:12,children:Object(A.jsx)(je,{name:"first_name",label:"First name"})}),Object(A.jsx)(T.a,{item:!0,xs:12,children:Object(A.jsx)(je,{name:"last_name",label:"Last name"})}),Object(A.jsx)(T.a,{item:!0,xs:12,children:Object(A.jsx)(je,{name:"email",label:"Email"})}),Object(A.jsx)(T.a,{item:!0,xs:12,children:Object(A.jsx)(je,{name:"password",label:"Password"})}),Object(A.jsx)(T.a,{item:!0,xs:12,children:Object(A.jsx)(pe,{className:a.submitBtn,children:n?Object(A.jsx)(H.a,{size:25,className:a.progressIcon}):"SIGN IN"})})]})})})]})]})})})})}))}],we=[{path:"/",component:D},{path:"/secure",component:U},{path:"/accounts",component:F},{path:"/transactions",component:W},{path:"/settings",component:q},{path:"/sign-out"}],Ne=["component"],ke=function(e){var t=e.component,n=Object(se.a)(e,Ne);return ge()?Object(A.jsx)(V.b,Object(s.a)(Object(s.a)({},n),{},{render:function(e){return Object(A.jsx)(t,Object(s.a)(Object(s.a)({},n),e))}})):Object(A.jsx)(V.a,{to:"/login"})},Ce=Object(B.a)((function(e){return{appBar:Object(o.a)({background:"#6EC177"},e.breakpoints.up("sm"),{display:"none"}),navigationLogo:{width:"50%",cursor:"pointer"},navigationLogoContainer:{display:"flex",justifyContent:"center",alignItems:"center",paddingBottom:e.spacing(6)},navigationDrawer:{width:240,border:"none",whiteSpace:"nowrap",overflowX:"hidden",position:"relative",height:"100vh"},navigationDrawerCollapse:{width:e.spacing(9)},navigationToolBar:Object(s.a)({display:"flex",justifyContent:"flex-end",alignItems:"center",paddingRight:e.spacing(1)},e.mixins.toolbar),navigationToolbarCollapse:{justifyContent:"center",paddingRight:0},menuItemIcon:{width:"100%"},navigationList:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},navigationSpacer:{flex:1},menuItem:{width:"80%",borderRadius:e.spacing(1),marginBottom:e.spacing(1)},menuItemActive:{backgroundColor:"#EBEBEC"}}})),Ee=n(4),_e=n(335),Be=n(336),Te=n(337),Re=n(338),Ae=function(e){var t=e.label,n=e.icon,c=e.activeIcon,r=e.path,i=e.onClick,o=Ce(),s=Object(a.useState)(!0),l=Object(G.a)(s,2),u=l[0],d=l[1],j=Object(V.h)();return Object(a.useEffect)((function(){d("/sign-out"===r||j.pathname===r)}),[j]),Object(A.jsxs)(_e.a,{button:!0,component:M.b,to:r,className:Object(Ee.a)(o.menuItem,u&&o.menuItemActive),onClick:i,children:[Object(A.jsx)(Be.a,{children:Object(A.jsx)(Te.a,{children:Object(A.jsx)("img",{src:u?c:n,className:o.menuItemIcon,alt:t})})}),Object(A.jsx)(Re.a,{primary:t})]})},Le=n.p+"static/media/DashboardIcon.be3360d8.svg",De=n.p+"static/media/DashboardIconActive.30e670d1.svg",Fe=n.p+"static/media/TransactionsIcon.6a8d6881.svg",We=n.p+"static/media/TransactionsIconActive.ac8593c8.svg",Ue=n.p+"static/media/SecureIcon.dbbcd9c2.svg",qe=n.p+"static/media/SecureIconActive.de253f45.svg",Ge=n.p+"static/media/SettingsIcon.d3153590.svg",ze=n.p+"static/media/SettingsIconActive.55bd9d8f.svg",Pe=n.p+"static/media/SignOutIcon.725c37a4.svg",He=n.p+"static/media/AccountsIcon.b4de8676.svg",Je=n.p+"static/media/AccountsIconActive.93364938.svg",Qe=n.p+"static/media/logo1.cb5e0e52.svg",Me=n.p+"static/media/logo2.fa32370a.svg",Ve=n(25),Xe=n(339),Ye=n(340),Ze=n(341),Ke=n(332),$e=n(346),et=n(330),tt=n(153),nt=n.n(tt),at=n(103),ct=n.n(at),rt=[{label:"Dashboard",path:"/",icon:Le,activeIcon:De},{label:"Accounts",path:"/accounts",icon:He,activeIcon:Je},{label:"Transactions",path:"/transactions",icon:Fe,activeIcon:We},{label:"Secure",path:"/secure",icon:Ue,activeIcon:qe},{label:"Settings",path:"/settings",icon:Ge,activeIcon:ze}],it=[{label:"Sign Out",icon:Pe,activeIcon:Pe}],ot=Object(R.b)(null,(function(e){return{logOut:function(t){e(function(e){return function(){var t=Object(Z.a)(Y.a.mark((function t(n){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:O}),localStorage.removeItem("auth_token"),e.push("/login");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=e.logOut,n=Ce(),c=Object(a.useState)(!0),r=Object(G.a)(c,2),i=r[0],o=r[1],s=Object(Ve.a)(),l=Object(Xe.a)(s.breakpoints.down("xs")),u=Object(V.g)(),d=function(){o(!i),console.log("yes")};return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(Ye.a,{className:n.appBar,children:Object(A.jsxs)(Ze.a,{children:[Object(A.jsx)(Ke.a,{onClick:d,edge:"start",color:"inherit","arial-labe":"Menu",children:Object(A.jsx)(ct.a,{})}),Object(A.jsx)(P.a,{color:"inherit",variant:"h6",children:"Quality"})]})}),Object(A.jsxs)($e.a,{variant:l?"temporary":"permanent",open:l?!i:i,classes:{paper:Object(Ee.a)(n.navigationDrawer,!i&&n.navigationDrawerCollapse)},children:[Object(A.jsx)("div",{className:Object(Ee.a)(n.navigationToolBar,!i&&n.navigationToolbarCollapse),children:Object(A.jsx)(Ke.a,{onClick:d,children:i?Object(A.jsx)(nt.a,{}):Object(A.jsx)(ct.a,{})})}),Object(A.jsx)("div",{className:n.navigationLogoContainer,children:Object(A.jsx)("img",{src:i?Qe:Me,alt:"Quality logo",className:n.navigationLogo})}),Object(A.jsxs)(et.a,{className:n.navigationList,children:[rt.map((function(e,t){return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(Ae,{label:e.label,icon:e.icon,activeIcon:e.activeIcon,path:e.path,onClick:function(){l&&o(!1)}},t)})})),it.map((function(e,a){return Object(A.jsxs)(A.Fragment,{children:["Sign Out"===e.label&&Object(A.jsx)("div",{className:n.navigationSpacer}),Object(A.jsx)(Ae,{label:e.label,icon:e.icon,activeIcon:e.activeIcon,path:e.path,onClick:function(){t(u)}},a)]})}))]})]})]})})),st=n(342),lt=Object(B.a)((function(e){return{appRoot:{display:"flex"},appBarSpacer:Object(o.a)({},e.breakpoints.down("xs"),Object(s.a)({},e.mixins.toolbar)),main_container:{flex:1,display:"flex",flexDirection:"column"}}}));var ut=function(){var e=lt(),t=Object(V.i)("/login"),n=Object(V.i)("/register"),c=function(){return t||n?void 0:Object(A.jsx)(ot,{})};return Object(a.useEffect)((function(){c()}),[]),Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(R.a,{store:C,children:Object(A.jsx)(st.a,{theme:_,children:Object(A.jsxs)("div",{className:t||n?void 0:e.appRoot,children:[c(),Object(A.jsxs)("div",{className:e.main_container,children:[Object(A.jsx)("div",{className:t||n?void 0:e.appBarSpacer}),Object(A.jsxs)(V.d,{children:[Ie.map((function(e,t){return Object(A.jsx)(V.b,{exact:!0,path:e.path,component:e.component},t)})),we.map((function(e,t){return Object(A.jsx)(ke,{exact:!0,path:e.path,component:e.component},t)}))]})]})]})})})})};i.a.render(Object(A.jsx)(c.a.StrictMode,{children:Object(A.jsx)(M.a,{children:Object(A.jsx)(ut,{})})}),document.getElementById("root"))}},[[288,1,2]]]);
//# sourceMappingURL=main.2568238e.chunk.js.map