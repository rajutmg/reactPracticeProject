(this.webpackJsonpproject1=this.webpackJsonpproject1||[]).push([[0],{164:function(e,t,n){},288:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(11),r=n.n(i),o=n(26),s=n(7),l=(n(164),n(60)),d=n(143),u="REGISTER_REQUEST",j="REGISTER_SUCCESS",b="REGISTER_FAIL",p="LOGIN_REQUEST",g="LOGIN_SUCESS",m="LOGIN_FAIL",O="LOGOUT",h="FETCH_CONTACT_REQUEST",f="FETCH_CONTACT_SUCESS",x="FETCH_CONTACT_FAILURE",v={loading:!1,user:{}},I=function(){var e=localStorage.getItem("auth_token");try{var t=JSON.parse(e).user;if(t)return Object(s.a)(Object(s.a)({},v),{},{user:t})}catch(n){return v}}(),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case j:return Object(s.a)(Object(s.a)({},e),{},{loading:!1,user:t.payload});case b:return Object(s.a)(Object(s.a)({},e),{},{loading:!1});case p:return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case g:return Object(s.a)(Object(s.a)({},e),{},{loading:!1,user:t.payload});case m:return Object(s.a)(Object(s.a)({},e),{},{loading:!1});case O:return Object(s.a)(Object(s.a)({},e),{},{user:{}});default:return e}},S={loading:!1,user:[],error:""},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case f:return Object(s.a)(Object(s.a)({},e),{},{loading:!1,user:t.payload,error:""});case x:return Object(s.a)(Object(s.a)({},e),{},{loading:!1,user:[],error:t.payload});default:return e}},N=Object(l.b)({authState:y,contacts:w}),k=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,C=Object(l.d)(N,k(Object(l.a)(d.a))),E=n(154),B=Object(E.a)({palette:{primary:{main:"#22982f"},secondary:{main:"#755600"}},typography:{h1:{fontSize:"4rem",fontWeight:500},h2:{fontSize:"3rem",fontWeight:500},h3:{fontSize:"2rem",fontWeight:500},h4:{fontSize:"1.5rem",fontWeight:500}},overrides:{textField:{padding:0}}}),_=n(2),T=(document.getElementById("mainNav"),function(){return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("div",{id:"mainNav",children:"Dashboard"})})}),R=function(){return Object(_.jsx)("div",{children:"Accounts"})},A=function(){return Object(_.jsx)("div",{children:"Transactions"})},L=function(){return Object(_.jsx)("div",{children:"Secure"})},F=function(){return Object(_.jsx)("div",{children:"Settings"})},D=n(21),U=n(326),q=n(332),W=n(333),G=n(86),P=n(334),z=n(330),H=n(347),J=n(29),Q=n(44),M=n(13),V=n(52),X=n.n(V),Y=n(85),Z=n(99),K=n.n(Z),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t="https://truly-contacts.herokuapp.com/api",n={};if(localStorage.auth_token){var a=JSON.parse(localStorage.auth_token),c=a.token;n.Authorization="".concat(c)}var i=K.a.create({baseURL:t,headers:n});return i.interceptors.response.use((function(e){return new Promise((function(t,n){t(e)}))}),(function(t){return t.response?404!==t.response.status?new Promise((function(e,n){n(t)})):(localStorage.removeItem("auth_token"),void(e?e.push("/login"):window.location="/login")):new Promise((function(e,n){n(t)}))})),i},ee=function(e){return{type:j,payload:e}},te=function(e){return{type:b,payload:e}},ne=function(e,t){[e].map((function(e){t(e)}))},ae=function(e){return{type:g,payload:e.user}},ce=function(e){return{type:m,payload:e}},ie=n(35),re=n(30),oe=n(57),se=n(343),le=["name"],de=Object(U.a)((function(e){return{input:{padding:e.spacing(2,2)}}})),ue=function(e){var t=e.name,n=Object(oe.a)(e,le),a=de(),c=Object(ie.c)(t),i=Object(D.a)(c,2),r=i[0],o=i[1],l=Object(s.a)(Object(s.a)(Object(s.a)({},r),n),{},{fullWidth:!0,variant:"outlined"});return o&&o.touched&&o.error&&(l.error=!0,l.helperText=o.error),Object(_.jsx)(se.a,Object(s.a)({inputProps:{className:a.input}},l))},je=["children"],be=function(e){var t=e.children,n=Object(oe.a)(e,je),a=Object(ie.d)().submitForm,c=Object(s.a)(Object(s.a)({},n),{},{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){a()}});return Object(_.jsx)(z.a,Object(s.a)(Object(s.a)({},c),{},{children:t}))},pe=n(345),ge=function(){return!!localStorage.auth_token},me=Object(U.a)((function(e){return{loginWrap:{minHeight:"calc(100vh - 100px)",background:"#efefef",display:"flex",justifyContent:"center",flexDirection:"column",padding:"50px 0"},loginBg:{background:"#fff",borderRadius:"20px",overflow:"hidden"},formInner:Object(o.a)({padding:e.spacing(7,12),textAlign:"center"},e.breakpoints.down("xs"),{padding:e.spacing(5)}),innerBg:Object(o.a)({background:"linear-gradient(to bottom, #37cf49, #2fba3f, #27a535, #1f902b, #177c22)",justifyContent:"center",color:"#fff",padding:e.spacing(7,6),textAlign:"center"},e.breakpoints.down("xs"),{padding:e.spacing(4,5)}),submitBtn:{borderRadius:e.spacing(8),color:"#fff",padding:e.spacing(1.5,7),width:"170px"},openBtn:{borderRadius:e.spacing(8),color:"#fff",padding:e.spacing(1.3,5),border:"2px solid #fff",marginTop:10},progressIcon:{color:"#fff"}}})),Oe={username:"",password:""},he=re.a().shape({username:re.b().required("Required"),password:re.b().required("No password provided.")}),fe=Object(Q.b)((function(e){return{loading:e.authState.loading,username:e.authState.user.username}}),(function(e){return{login:function(t,n,a,c){console.log(t),e(function(e,t,n,a){return function(){var c=Object(Y.a)(X.a.mark((function c(i){var r,o,s;return X.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,i({type:p}),c.next=4,$().post("/auth/login",e);case 4:r=c.sent,o=r.data,i(ae(o)),console.log(o),localStorage.setItem("auth_token",JSON.stringify(o)),t.push("/"),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(0),c.t0.response&&(s=c.t0.response.data,i(ce(s)),console.log(n({message:s.detail})),a());case 15:case"end":return c.stop()}}),c,null,[[0,12]])})));return function(e){return c.apply(this,arguments)}}()}(t,n,a,c))}}}))((function(e){var t=e.login,n=e.loading,i=e.username,r=Object(a.useState)({message:""}),o=Object(D.a)(r,2),l=o[0],d=o[1];function u(e){return Object(_.jsx)(pe.a,Object(s.a)({elevation:6,variant:"filled"},e))}var j=c.a.useState(!1),b=Object(D.a)(j,2),p=b[0],g=b[1],m=function(){g(!0)},O=function(e,t){"clickaway"!==t&&g(!1)},h=me(),f=Object(M.g)();ge()&&f.push("/");return Object(_.jsx)("section",{className:h.loginWrap,children:Object(_.jsxs)(q.a,{children:[Object(_.jsx)(W.a,{container:!0,justify:"center",children:Object(_.jsxs)(W.a,{container:!0,item:!0,sm:9,className:h.loginBg,children:[Object(_.jsxs)(W.a,{item:!0,sm:7,container:!0,justify:"center",className:h.formInner,children:[Object(_.jsxs)(G.a,{variant:"h3",color:"primary",style:{marginBottom:"20px"},children:["Sign in to ",i||"your account"]}),Object(_.jsx)(ie.b,{initialValues:Object(s.a)({},Oe),validationSchema:he,onSubmit:function(e){console.log(e),t(e,f,d,m)},children:Object(_.jsx)(ie.a,{style:{width:"100%"},children:Object(_.jsxs)(W.a,{container:!0,spacing:2,children:[Object(_.jsx)(W.a,{item:!0,xs:12,children:Object(_.jsx)(ue,{name:"username",label:"Username"})}),Object(_.jsx)(W.a,{item:!0,xs:12,children:Object(_.jsx)(ue,{name:"password",label:"Password"})}),Object(_.jsx)(W.a,{item:!0,xs:12,children:Object(_.jsx)(be,{className:h.submitBtn,children:n?Object(_.jsx)(P.a,{size:25,className:h.progressIcon}):"SIGN IN"})})]})})})]}),Object(_.jsxs)(W.a,{item:!0,sm:5,container:!0,direction:"column",alignItems:"center",className:(h.formInner,h.innerBg),children:[Object(_.jsx)(G.a,{variant:"h3",style:{marginBottom:"15px"},children:"Hello Friend"}),Object(_.jsx)(G.a,{variant:"subtitle1",children:"Enter Your personal details and start journey with us"}),Object(_.jsx)(z.a,{component:J.b,to:"/register",variant:"outlined",className:h.openBtn,children:"SIGN UP"})]})]})}),Object(_.jsx)(H.a,{anchorOrigin:{vertical:"top",horizontal:"left"},open:p,autoHideDuration:6e3,onClose:O,children:Object(_.jsx)(u,{onClose:O,severity:"error",children:l.message})})]})})})),xe=Object(U.a)((function(e){return{loginWrap:{minHeight:"calc(100vh - 100px)",background:"#efefef",display:"flex",justifyContent:"center",flexDirection:"column",padding:"50px 0"},loginBg:{background:"#fff",borderRadius:"20px",overflow:"hidden"},formInner:Object(o.a)({padding:e.spacing(7,12),textAlign:"center"},e.breakpoints.down("xs"),{padding:e.spacing(5)}),innerBg:Object(o.a)({background:"linear-gradient(to bottom, #37cf49, #2fba3f, #27a535, #1f902b, #177c22)",justifyContent:"center",color:"#fff",padding:e.spacing(7,6),textAlign:"center"},e.breakpoints.down("xs"),{padding:e.spacing(4,5)}),submitBtn:{borderRadius:e.spacing(8),color:"#fff",padding:e.spacing(1.5,7),width:"170px"},openBtn:{borderRadius:e.spacing(8),color:"#fff",padding:e.spacing(1.3,5),border:"2px solid #fff",marginTop:10},progressIcon:{color:"#fff"}}})),ve={username:"",first_name:"",last_name:"",email:"",password:""},Ie=re.a().shape({username:re.b().required("Required"),first_name:re.b().required("Required"),last_name:re.b().required("Required"),email:re.b().email("Invalid email.").required("Required"),password:re.b().required("No password provided.").min(8,"Password is too short - should be 8 chars minimum.").matches(/[a-zA-Z]/,"Password can only contain Latin letters.")}),ye=[{path:"/login",component:fe},{path:"/register",component:Object(Q.b)((function(e){return{loading:e.authState.loading}}),(function(e){return{register:function(t,n,a){var c=a.setErrors;console.log(t),e(function(e,t,n){var a=n.setErrors;return function(){var n=Object(Y.a)(X.a.mark((function n(c){var i,r,o;return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c({type:u}),n.next=4,$().post("/auth/register",e);case 4:i=n.sent,r=i.data,c(ee(r)),t.push("/login"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),n.t0.response&&400===n.t0.response.status&&(o=n.t0.response.data,c(te(o)),ne(o,a));case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(t,n,{setErrors:c}))}}}))((function(e){var t=e.register,n=e.loading,a=xe(),c=Object(M.g)();ge()&&c.push("/");return Object(_.jsx)("section",{className:a.loginWrap,children:Object(_.jsx)(q.a,{children:Object(_.jsx)(W.a,{container:!0,justify:"center",children:Object(_.jsxs)(W.a,{container:!0,item:!0,sm:9,className:a.loginBg,children:[Object(_.jsxs)(W.a,{item:!0,sm:5,container:!0,direction:"column",alignItems:"center",className:(a.formInner,a.innerBg),children:[Object(_.jsx)(G.a,{variant:"h3",style:{marginBottom:"15px"},children:"Welcome Back !"}),Object(_.jsx)(G.a,{variant:"subtitle1",children:"To keep Connected With us please login with personal info"}),Object(_.jsx)(z.a,{component:J.b,to:"/login",variant:"outlined",className:a.openBtn,children:"SIGN IN"})]}),Object(_.jsxs)(W.a,{item:!0,sm:7,container:!0,justify:"center",className:a.formInner,children:[Object(_.jsx)(G.a,{variant:"h3",color:"primary",style:{marginBottom:"20px"},children:"Sign into your account"}),Object(_.jsx)(ie.b,{initialValues:Object(s.a)({},ve),validationSchema:Ie,onSubmit:function(e,n){var a=n.setErrors;console.log(e),t(e,c,{setErrors:a})},children:Object(_.jsx)(ie.a,{style:{width:"100%"},children:Object(_.jsxs)(W.a,{container:!0,spacing:2,children:[Object(_.jsx)(W.a,{item:!0,xs:12,children:Object(_.jsx)(ue,{name:"username",label:"Username"})}),Object(_.jsx)(W.a,{item:!0,xs:12,children:Object(_.jsx)(ue,{name:"first_name",label:"First name"})}),Object(_.jsx)(W.a,{item:!0,xs:12,children:Object(_.jsx)(ue,{name:"last_name",label:"Last name"})}),Object(_.jsx)(W.a,{item:!0,xs:12,children:Object(_.jsx)(ue,{name:"email",label:"Email"})}),Object(_.jsx)(W.a,{item:!0,xs:12,children:Object(_.jsx)(ue,{name:"password",label:"Password"})}),Object(_.jsx)(W.a,{item:!0,xs:12,children:Object(_.jsx)(be,{className:a.submitBtn,children:n?Object(_.jsx)(P.a,{size:25,className:a.progressIcon}):"SIGN IN"})})]})})})]})]})})})})}))}],Se=[{path:"/",component:T},{path:"/secure",component:L},{path:"/accounts",component:R},{path:"/transactions",component:A},{path:"/settings",component:F},{path:"/sign-out"}],we=["component"],Ne=function(e){var t=e.component,n=Object(oe.a)(e,we);return ge()?Object(_.jsx)(M.b,Object(s.a)(Object(s.a)({},n),{},{render:function(e){return Object(_.jsx)(t,Object(s.a)(Object(s.a)({},n),e))}})):Object(_.jsx)(M.a,{to:"/login"})},ke=Object(U.a)((function(e){return{appBar:Object(o.a)({background:"#6EC177"},e.breakpoints.up("sm"),{display:"none"}),navigationLogo:{width:"50%",cursor:"pointer"},navigationLogoContainer:{display:"flex",justifyContent:"center",alignItems:"center",paddingBottom:e.spacing(6)},navigationDrawer:{width:240,border:"none",whiteSpace:"nowrap",overflowX:"hidden",position:"relative",height:"100vh"},navigationDrawerCollapse:{width:e.spacing(9)},navigationToolBar:Object(s.a)({display:"flex",justifyContent:"flex-end",alignItems:"center",paddingRight:e.spacing(1)},e.mixins.toolbar),navigationToolbarCollapse:{justifyContent:"center",paddingRight:0},menuItemIcon:{width:"100%"},navigationList:{display:"flex",flexDirection:"column",alignItems:"center",flex:1},navigationSpacer:{flex:1},menuItem:{width:"80%",borderRadius:e.spacing(1),marginBottom:e.spacing(1)},menuItemActive:{backgroundColor:"#EBEBEC"}}})),Ce=n(4),Ee=n(335),Be=n(336),_e=n(337),Te=n(338),Re=function(e){var t=e.label,n=e.icon,c=e.activeIcon,i=e.path,r=e.onClick,o=ke(),s=Object(a.useState)(!0),l=Object(D.a)(s,2),d=l[0],u=l[1],j=Object(M.h)();return Object(a.useEffect)((function(){u("/sign-out"===i||j.pathname===i)}),[j]),Object(_.jsxs)(Ee.a,{button:!0,component:J.b,to:i,className:Object(Ce.a)(o.menuItem,d&&o.menuItemActive),onClick:r,children:[Object(_.jsx)(Be.a,{children:Object(_.jsx)(_e.a,{children:Object(_.jsx)("img",{src:d?c:n,className:o.menuItemIcon,alt:t})})}),Object(_.jsx)(Te.a,{primary:t})]})},Ae=n.p+"static/media/DashboardIcon.be3360d8.svg",Le=n.p+"static/media/DashboardIconActive.30e670d1.svg",Fe=n.p+"static/media/TransactionsIcon.6a8d6881.svg",De=n.p+"static/media/TransactionsIconActive.ac8593c8.svg",Ue=n.p+"static/media/SecureIcon.dbbcd9c2.svg",qe=n.p+"static/media/SecureIconActive.de253f45.svg",We=n.p+"static/media/SettingsIcon.d3153590.svg",Ge=n.p+"static/media/SettingsIconActive.55bd9d8f.svg",Pe=n.p+"static/media/SignOutIcon.725c37a4.svg",ze=n.p+"static/media/AccountsIcon.b4de8676.svg",He=n.p+"static/media/AccountsIconActive.93364938.svg",Je=n.p+"static/media/logo1.cb5e0e52.svg",Qe=n.p+"static/media/logo2.fa32370a.svg",Me=n(25),Ve=n(339),Xe=n(340),Ye=n(341),Ze=n(331),Ke=n(346),$e=n(329),et=n(153),tt=n.n(et),nt=n(103),at=n.n(nt),ct=[{label:"Dashboard",path:"/",icon:Ae,activeIcon:Le},{label:"Accounts",path:"/accounts",icon:ze,activeIcon:He},{label:"Transactions",path:"/transactions",icon:Fe,activeIcon:De},{label:"Secure",path:"/secure",icon:Ue,activeIcon:qe},{label:"Settings",path:"/settings",icon:We,activeIcon:Ge}],it=[{label:"Sign Out",icon:Pe,activeIcon:Pe}],rt=Object(Q.b)(null,(function(e){return{logOut:function(t){e(function(e){return function(){var t=Object(Y.a)(X.a.mark((function t(n){return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:O}),localStorage.removeItem("auth_token"),e.push("/login");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=e.logOut,n=ke(),c=Object(a.useState)(!0),i=Object(D.a)(c,2),r=i[0],o=i[1],s=Object(Me.a)(),l=Object(Ve.a)(s.breakpoints.down("xs")),d=Object(M.g)(),u=function(){o(!r),console.log("yes")};return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Xe.a,{className:n.appBar,children:Object(_.jsxs)(Ye.a,{children:[Object(_.jsx)(Ze.a,{onClick:u,edge:"start",color:"inherit","arial-labe":"Menu",children:Object(_.jsx)(at.a,{})}),Object(_.jsx)(G.a,{color:"inherit",variant:"h6",children:"Quality"})]})}),Object(_.jsxs)(Ke.a,{variant:l?"temporary":"permanent",open:l?!r:r,classes:{paper:Object(Ce.a)(n.navigationDrawer,!r&&n.navigationDrawerCollapse)},children:[Object(_.jsx)("div",{className:Object(Ce.a)(n.navigationToolBar,!r&&n.navigationToolbarCollapse),children:Object(_.jsx)(Ze.a,{onClick:u,children:r?Object(_.jsx)(tt.a,{}):Object(_.jsx)(at.a,{})})}),Object(_.jsx)("div",{className:n.navigationLogoContainer,children:Object(_.jsx)("img",{src:r?Je:Qe,alt:"Quality logo",className:n.navigationLogo})}),Object(_.jsxs)($e.a,{className:n.navigationList,children:[ct.map((function(e,t){return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(Re,{label:e.label,icon:e.icon,activeIcon:e.activeIcon,path:e.path,onClick:function(){l&&o(!1)}},t)})})),it.map((function(e,a){return Object(_.jsxs)(_.Fragment,{children:["Sign Out"===e.label&&Object(_.jsx)("div",{className:n.navigationSpacer}),Object(_.jsx)(Re,{label:e.label,icon:e.icon,activeIcon:e.activeIcon,path:e.path,onClick:function(){t(d)}},a)]})}))]})]})]})})),ot=n(342),st=Object(U.a)((function(e){return{appRoot:{display:"flex"},appBarSpacer:Object(o.a)({},e.breakpoints.down("xs"),Object(s.a)({},e.mixins.toolbar))}}));var lt=function(){var e=st(),t=Object(M.i)("/login"),n=Object(M.i)("/register"),c=function(){return t||n?void 0:Object(_.jsx)(rt,{})};return Object(a.useEffect)((function(){c()}),[]),Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(Q.a,{store:C,children:Object(_.jsx)(ot.a,{theme:B,children:Object(_.jsxs)("div",{className:t||n?void 0:e.appRoot,children:[c(),Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{className:t||n?void 0:e.appBarSpacer}),Object(_.jsxs)(M.d,{children:[ye.map((function(e,t){return Object(_.jsx)(M.b,{exact:!0,path:e.path,component:e.component},t)})),Se.map((function(e,t){return Object(_.jsx)(Ne,{exact:!0,path:e.path,component:e.component},t)}))]})]})]})})})})};r.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(J.a,{children:Object(_.jsx)(lt,{})})}),document.getElementById("root"))}},[[288,1,2]]]);
//# sourceMappingURL=main.895ba67c.chunk.js.map